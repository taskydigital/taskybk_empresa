"use strict";(self.webpackChunktasky_tasker=self.webpackChunktasky_tasker||[]).push([[902],{8902:(U,l,o)=>{o.r(l),o.d(l,{AppointListModule:()=>b});var p=o(6895),f=o(9132),v=o(5861),t=o(4650),g=o(5377),u=o(7009),A=o(8826),x=o(164),h=o(7392),C=o(3646);function _(a,m){if(1&a&&(t.TgZ(0,"div",9)(1,"div")(2,"strong"),t._uU(3,"Contacto:"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div")(6,"strong"),t._uU(7,"Correo:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"div")(10,"strong"),t._uU(11,"Tel\xe9fono:"),t.qZA(),t._uU(12),t.qZA()()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",e.contact,""),t.xp6(4),t.hij(" ",e.email,""),t.xp6(4),t.hij(" ",e.phone,"")}}function Z(a,m){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"div",3)(2,"div",4)(3,"div",5),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"mat-icon",6),t.NdJ("click",function(){const n=t.CHM(e).index,s=t.oxw();return t.KtG(s.onEditAppoint(n))}),t._uU(7,"edit"),t.qZA(),t.TgZ(8,"mat-icon",6),t.NdJ("click",function(){const n=t.CHM(e).index,s=t.oxw();return t.KtG(s.onDelAppoint(n))}),t._uU(9,"delete_otuline"),t.qZA(),t.TgZ(10,"mat-icon",6),t.NdJ("click",function(){const n=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.onAddGoogleCalendar(n))}),t._uU(11,"calendar_month"),t.qZA(),t._uU(12," \xa0 "),t.TgZ(13,"mat-icon",6),t.NdJ("click",function(){const n=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.onchangefull(n))}),t._uU(14),t.qZA()(),t.TgZ(15,"div"),t._uU(16),t.qZA(),t.TgZ(17,"div",7),t._uU(18),t.qZA()(),t.YNc(19,_,13,3,"div",8),t.qZA()}if(2&a){const e=m.$implicit,i=t.oxw();t.xp6(4),t.Oqu(t.xi3(5,5,e.datetime,"short")),t.xp6(10),t.Oqu(i.getAppIcon(e)),t.xp6(2),t.Oqu(e.costumer),t.xp6(2),t.Oqu(e.task),t.xp6(1),t.Q6J("ngIf",e.full)}}const y=[{path:"",component:(()=>{class a{constructor(e,i,r,n){this.sharedvar=e,this.snkBar=i,this.dtb=r,this.dg=n,e.staff.appoint&&(e.staff.appoint=e.staff.appoint.sort(function(s,c){return s.datetime-c.datetime}))}ngOnInit(){if(!this.sharedvar.staff.appoint)return;let e=new Date,i=0;for(;i<this.sharedvar.staff.appoint.length;)e>new Date(this.sharedvar.staff.appoint[i].datetime)?this.sharedvar.staff.appoint.splice(i,1):i++;this.dtb.updateStaffAsync(this.sharedvar.staff)}getClicked(e){}onchangefull(e){e.full=!e.full}onAddGoogleCalendar(e){alert(`Agregar a google calendar ${e.costumer}`)}getAppIcon(e){return e.full?"expand_less":"expand_more"}onDelAppoint(e){!this.sharedvar.staff.appoint||0===this.sharedvar.staff.appoint.length||this.snkBar.open("Eliminar item de la agenda?.","Ok",{duration:5e3}).onAction().subscribe(i=>{this.sharedvar.staff.appoint?.splice(e,1),this.dtb.updateStaffAsync(this.sharedvar.staff)})}onEditAppoint(e){var i=this;if(!this.sharedvar.staff.appoint||!this.sharedvar.staff.appoint[e])return;let n="Editar agenda: ";this.sharedvar.staff.appoint&&this.sharedvar.staff.appoint[e].costumer&&(n+=this.sharedvar.staff.appoint[e].costumer),this.dg.aDefault({schema:{controls:[{name:"datetime",label:"Fecha y hora:",type:"datetime-local",validators:{required:!0}},{name:"task",label:"Actividad/Compromiso:",type:"textarea",totalRows:4,style:"w-full",validators:{required:!0}}]},value:this.sharedvar.staff.appoint[e],title:n,dgwidth:400,dgheigth:400}).subscribe(function(){var c=(0,v.Z)(function*(d){d&&i.sharedvar.staff.appoint&&(i.sharedvar.staff.appoint[e].datetime=d.datetime,i.sharedvar.staff.appoint[e].task=d.task,i.dtb.updateStaffAsync(i.sharedvar.staff))});return function(d){return c.apply(this,arguments)}}())}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(g.D),t.Y36(u.ux),t.Y36(A.k),t.Y36(x.x))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-appoint-list"]],decls:3,vars:2,consts:[[3,"buttons","onClicked"],[1,"overflow-auto","p-2","gap-y-2"],[4,"ngFor","ngForOf"],[1,"h-24","items-center","border-b","border-gray-300"],[1,"flex","flex-row","mt-1","text-sky-600"],[1,"flex-1"],[1,"hover:text-violet-500",3,"click"],[1,"ml-2","h-16","text-sm","text-gray-400","overflow-hidden"],["class","ml-1 p-1 bg-slate-100 text-xs text-gray-600 border-b border-gray-300",4,"ngIf"],[1,"ml-1","p-1","bg-slate-100","text-xs","text-gray-600","border-b","border-gray-300"]],template:function(i,r){1&i&&(t.TgZ(0,"app-header",0),t.NdJ("onClicked",function(s){return r.getClicked(s)}),t.qZA(),t.TgZ(1,"div",1),t.YNc(2,Z,20,8,"div",2),t.qZA()),2&i&&(t.Q6J("buttons","100000"),t.xp6(2),t.Q6J("ngForOf",r.sharedvar.staff.appoint))},dependencies:[p.sg,p.O5,h.Hw,C.G,p.uU]})}return a})()}];let T=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#i=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(y),f.Bz]})}return a})();var k=o(8471);let b=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#i=this.\u0275inj=t.cJS({imports:[p.ez,T,h.Ps,k.O,u.ZX]})}return a})()}}]);