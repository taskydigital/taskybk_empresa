"use strict";(self.webpackChunktasky_supplier=self.webpackChunktasky_supplier||[]).push([[430],{430:(F,f,s)=>{s.r(f),s.d(f,{TargetModule:()=>U});var m=s(7087),p=s(3759),d=s(3241),t=s(2283),h=s(4758),y=s(8878),T=s(3620),Z=s(6655),C=s(3578),g=s(8464),u=s(9347);const k=["editControlTrigger"];function A(r,L){if(1&r){const a=t.EpF();t.TgZ(0,"div",9)(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",11),t._uU(4,"Tel\xe9fono:"),t.qZA(),t._uU(5,"\xa0 "),t.TgZ(6,"div",12),t._uU(7),t.qZA(),t._UZ(8,"div",13),t.TgZ(9,"div",11),t._uU(10,"Correo:"),t.qZA(),t._uU(11,"\xa0 "),t.TgZ(12,"div",14),t._uU(13),t.qZA(),t.TgZ(14,"mat-icon",15),t.NdJ("click",function(){const o=t.CHM(a).index,n=t.oxw();return t.KtG(n.onDeleteStaff(o))}),t._uU(15,"delete"),t.qZA()()}if(2&r){const a=L.$implicit,e=t.oxw();t.xp6(2),t.Oqu(e.getTaskerStrData(0,a)),t.xp6(5),t.Oqu(e.getTaskerStrData(1,a)),t.xp6(6),t.Oqu(e.getTaskerStrData(2,a))}}const x=[{path:"",component:(()=>{class r{constructor(a,e,i,o){this.sharedvar=a,this.dg=e,this.ds=i,this.dtb=o}ngOnInit(){return(0,d.Z)(function*(){})()}getClicked(a){if(3===a.index){let e=document.getElementById("spanTrigger");e&&(e.style.display="",e.style.position="absolute",e.style.left=a.pageX+5+"px",e.style.top=a.pageY+5+"px",this.editControlTrigger.openMenu())}}onTaskerCond(a,e){var i=this;return(0,d.Z)(function*(){switch(a){case 0:yield i.onSelCtrlStaff();break;case 1:i.filterStaff()}})()}onSelCtrlStaff(){var a=this;return(0,d.Z)(function*(){const e=[];(yield a.dtb.getStaffByFilterAsync({queryType:1,active:!0,stars:0,rol:"K"})).forEach(n=>{n&&e.push({selected:!1,myid:n._id,name:`${n.names} ${n.second_names}`,hide1:`${n.phone}:${n.email}`})}),a.ds.aSelectDefault({title:"Seleccione Tasker",dgwidth:300,dgheigth:450,viewfilter:!0,viewAdd:!1,valuelst:e}).subscribe(function(){var n=(0,d.Z)(function*(l){l&&a.updateTaskerList(l)});return function(l){return n.apply(this,arguments)}}())})()}updateTaskerList(a){var e=this;return(0,d.Z)(function*(){a.forEach(i=>{e.sharedvar.pollActivity.taskerList?.includes(i.myid)||(e.sharedvar.pollActivity.taskerList.push(i.myid),e.sharedvar.pollActivity.taskerNameList.push(i.name+":"+i.hide1))}),yield e.dtb.updatePollGroupAsync(e.sharedvar.pollActivity)})()}filterStaff(){var a=this;this.dg.aDefault({schema:{controls:[{name:"age_from",label:"edad m\xednima:",type:"number",default:18,validators:{}},{name:"age_to",label:"edad l\xedmite:",type:"number",default:100,validators:{}},{name:"city",label:"Ciudad",type:"textarea",style:"w-full",totalRows:5,validators:{}},{name:"studyLevel",label:"Nivel del estudio:",type:"select",validators:{},selectOptions:[{key:"0",value:"Ninguno"},{key:"1",value:"Primaria"},{key:"2",value:"Secundario"},{key:"3",value:"Universitario"}]},{name:"stars",label:"Calificaci\xf3n (1..5):",type:"number",default:1,validators:{min:1,max:5}}]},title:"Filtros",dgwidth:300}).subscribe(function(){var o=(0,d.Z)(function*(n){if(n){const l={queryType:3,active:!0,rol:"K"};n.city&&n.city.length>0&&(l.city=n.city.split("\n")),n.studyLevel&&(l.studyLevel=n.studyLevel);const v=yield a.dtb.getStaffByFilterAsync(l);if(!v)return;n=[],v.forEach(c=>{n.push({myid:c._id,name:`${c.names} ${c.second_names}`,hide1:`${c.phone}:${c.email}`})}),a.updateTaskerList(n)}});return function(n){return o.apply(this,arguments)}}())}execFilter(){return(0,d.Z)(function*(){})()}getTaskerStrData(a,e){return e.split(":")[a]||""}onDeleteStaff(a){var e=this;return(0,d.Z)(function*(){e.sharedvar.pollActivity.taskerList?.splice(a,1),e.sharedvar.pollActivity.taskerNameList?.splice(a,1),yield e.dtb.updatePollGroupAsync(e.sharedvar.pollActivity)})()}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(h.D),t.Y36(y.x),t.Y36(T.n),t.Y36(Z.k))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-target"]],viewQuery:function(e,i){if(1&e&&t.Gf(k,5),2&e){let o;t.iGM(o=t.CRH())&&(i.editControlTrigger=o.first)}},decls:23,vars:4,consts:[[3,"buttons","nav_menu","onClicked"],["id","spanTrigger",3,"matMenuTriggerFor"],["editControlTrigger","matMenuTrigger"],[1,"h-96","p-4"],[1,"flex-col","flex-wrap","p-2","gap-1"],["class","h-10 flex gap-1 border-b border-gray-100",4,"ngFor","ngForOf"],["targetEdit","matMenu"],[1,"h-8","m-2","font-medium","text-xl"],["mat-menu-item","",3,"click"],[1,"h-10","flex","gap-1","border-b","border-gray-100"],[1,"w-60","font-medium"],[1,"font-thin"],[1,"w-20","font-thin","text-gray-400"],[1,"w-2"],[1,"w-72","font-thin","text-gray-400"],[1,"text-gray-300","hover:text-violet-500",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"app-header",0),t.NdJ("onClicked",function(n){return i.getClicked(n)}),t.qZA(),t._UZ(1,"span",1,2),t.TgZ(3,"div",3)(4,"div",4),t.YNc(5,A,16,3,"div",5),t.qZA()(),t.TgZ(6,"mat-menu",null,6)(8,"div",7),t._uU(9,"Condiciones"),t.qZA(),t._UZ(10,"hr"),t.TgZ(11,"button",8),t.NdJ("click",function(){return i.onTaskerCond(0,"De la lista")}),t.TgZ(12,"mat-icon"),t._uU(13,"build"),t.qZA(),t._uU(14," De la lista "),t.qZA(),t.TgZ(15,"button",8),t.NdJ("click",function(){return i.onTaskerCond(1,"De un filtro")}),t.TgZ(16,"mat-icon"),t._uU(17,"file_download"),t.qZA(),t._uU(18," Fitro "),t.qZA(),t.TgZ(19,"button",8),t.NdJ("click",function(){return i.onTaskerCond(2,"Todos")}),t.TgZ(20,"mat-icon"),t._uU(21,"file_download"),t.qZA(),t._uU(22," Todos "),t.qZA()()),2&e){const o=t.MAs(7);t.Q6J("buttons","10010")("nav_menu",!0),t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(4),t.Q6J("ngForOf",i.sharedvar.pollActivity.taskerNameList)}},dependencies:[m.sg,C.G,g.Hw,u.VK,u.OP,u.p6]})}return r})()}];let b=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#e=this.\u0275mod=t.oAB({type:r});static#a=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(x),p.Bz]})}return r})();var _=s(769),S=s(7572);let U=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#e=this.\u0275mod=t.oAB({type:r});static#a=this.\u0275inj=t.cJS({imports:[m.ez,b,_.O,S.N,g.Ps,u.Tx]})}return r})()}}]);