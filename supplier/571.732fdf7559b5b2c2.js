"use strict";(self.webpackChunktasky_supplier=self.webpackChunktasky_supplier||[]).push([[571],{3571:(A,f,s)=>{s.r(f),s.d(f,{PollControlStaffModule:()=>Z});var c=s(7087),u=s(3759),i=s(3241),t=s(2283),h=s(6655),m=s(4758),v=s(3620),C=s(3578),p=s(8464);function g(n,b){if(1&n){const o=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t._uU(2),t.qZA(),t.TgZ(3,"mat-icon",6),t.NdJ("click",function(){const l=t.CHM(o).index,a=t.oxw();return t.KtG(a.onDeleteStaff(l))}),t._uU(4,"delete"),t.qZA()()}if(2&n){const o=b.$implicit;t.xp6(2),t.Oqu(o.staffName)}}const y=[{path:"",component:(()=>{class n{constructor(o,e,r){this.dtb=o,this.sharedvar=e,this.ds=r,this.staffList=[]}ngOnInit(){var o=this;return(0,i.Z)(function*(){o.staffList=yield o.dtb.getStaffByFilterAsync({queryType:1,active:!0,stars:0,rol:"P"})})()}getClicked(o){2===o.index&&this.onSelCtrlStaff()}onSelCtrlStaff(){var o=this;return(0,i.Z)(function*(){const e=[];o.staffList.forEach(l=>{l&&e.push({selected:!1,myid:l._id,name:`${l.names} ${l.second_names}`})}),o.ds.aSelectDefault({title:"Seleccione Coordinador",dgwidth:300,dgheigth:450,viewfilter:!0,viewAdd:!1,valuelst:e}).subscribe(function(){var l=(0,i.Z)(function*(a){a&&(a.forEach(d=>{o.sharedvar.pollGrpIndexSub.controlList?.find(G=>G.staff__id===d.myid)||o.sharedvar.pollGrpIndexSub.controlList?.push({staff__id:d.myid,staffName:d.name})}),yield o.dtb.updatePollGroupAsync(o.sharedvar.pollGroupIndex))});return function(a){return l.apply(this,arguments)}}())})()}onDeleteStaff(o){var e=this;return(0,i.Z)(function*(){e.sharedvar.pollGrpIndexSub.controlList?.splice(o,1),yield e.dtb.updatePollGroupAsync(e.sharedvar.pollGroupIndex)})()}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(h.k),t.Y36(m.D),t.Y36(v.n))};static#o=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-poll-control-staff"]],decls:4,vars:3,consts:[[3,"buttons","nav_menu","onClicked"],[1,"h-96","p-4"],[1,"flex-col","flex-wrap","p-2","gap-1"],["class","h-10 flex gap-1 border-b border-gray-100",4,"ngFor","ngForOf"],[1,"h-10","flex","gap-1","border-b","border-gray-100"],[1,"flex-1"],[3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"app-header",0),t.NdJ("onClicked",function(a){return r.getClicked(a)}),t.qZA(),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,g,5,1,"div",3),t.qZA()()),2&e&&(t.Q6J("buttons","10100")("nav_menu",!1),t.xp6(3),t.Q6J("ngForOf",r.sharedvar.pollGrpIndexSub.controlList))},dependencies:[c.sg,C.G,p.Hw]})}return n})()}];let S=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#o=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(y),u.Bz]})}return n})();var x=s(7572),P=s(769);let Z=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#o=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[c.ez,S,x.N,P.O,p.Ps]})}return n})()}}]);