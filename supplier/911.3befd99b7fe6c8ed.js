"use strict";(self.webpackChunktasky_supplier=self.webpackChunktasky_supplier||[]).push([[911],{911:(k,v,c)=>{c.r(v),c.d(v,{PollCrmModule:()=>M});var m=c(7087),g=c(3759),d=c(3241),t=c(2283),C=c(4758),y=c(3620),_=c(6655),A=c(3578),p=c(9347),f=c(8464);const Z=["editControlTrigger"];function x(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",11),t._uU(4,"Contacto:"),t.qZA(),t._uU(5,"\xa0 "),t.TgZ(6,"div",12),t._uU(7),t.qZA(),t._UZ(8,"div",13),t.TgZ(9,"div",11),t._uU(10,"Tel\xe9fono:"),t.qZA(),t._uU(11,"\xa0 "),t.TgZ(12,"div",14),t._uU(13),t.qZA(),t.TgZ(14,"mat-icon",15),t.NdJ("click",function(){const l=t.CHM(e).index,s=t.oxw(2);return t.KtG(s.onDeleteCost(l))}),t._uU(15,"delete"),t.qZA()()}if(2&o){const e=u.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(i.getStrData(1,e)),t.xp6(5),t.Oqu(i.getStrData(3,e)),t.xp6(6),t.Oqu(i.getStrData(4,e))}}function T(o,u){if(1&o&&(t.TgZ(0,"div")(1,"div",7),t.YNc(2,x,16,3,"div",8),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.sharedvar.pollActivity.costumerList)}}function P(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",16),t._uU(2),t.qZA(),t.TgZ(3,"div",17),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",15),t.NdJ("click",function(){const l=t.CHM(e).index,s=t.oxw(2);return t.KtG(s.onDeleteProd(l))}),t._uU(6,"delete"),t.qZA()()}if(2&o){const e=u.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(i.getStrData(0,e)),t.xp6(2),t.Oqu(i.getStrData(1,e))}}function b(o,u){if(1&o&&(t.TgZ(0,"div")(1,"div",7),t.YNc(2,P,7,2,"div",8),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.sharedvar.pollActivity.productList)}}const S=[{path:"",component:(()=>{class o{constructor(e,i,n){this.sharedvar=e,this.ds=i,this.dtb=n,this.tabSelected=0,this.tabSelectedName="Lista de Clientes"}getClicked(e){switch(e.index){case 2:0===this.tabSelected?this.onSelCost():this.onSelProd();break;case 3:let i=document.getElementById("spanTrigger");i&&(i.style.display="",i.style.position="absolute",i.style.left=e.pageX+5+"px",i.style.top=e.pageY+5+"px",this.editControlTrigger.openMenu())}}selCostumer(){this.tabSelected=0,this.tabSelectedName="Lista de Clientes"}selProd(){this.tabSelected=1,this.tabSelectedName="Lista de Productos"}onSelProd(){var e=this;return(0,d.Z)(function*(){const i=[],n=yield e.dtb.getAllCRMProdAsync();n&&(n.forEach(s=>{s&&i.push({selected:!1,myid:s.id,name:s.name,hide1:s._id})}),e.ds.aSelectDefault({title:"Seleccione Productos",dgwidth:300,dgheigth:450,viewfilter:!0,viewAdd:!1,valuelst:i}).subscribe(function(){var s=(0,d.Z)(function*(r){r&&(r.forEach(a=>{e.sharedvar.pollActivity.productList?.includes(a.myid)||e.sharedvar.pollActivity.productList?.push(`${a.myid}:${a.name}:${a.hide1}`)}),yield e.dtb.updatePollGroupAsync(e.sharedvar.pollActivity))});return function(r){return s.apply(this,arguments)}}()))})()}onDeleteProd(e){var i=this;return(0,d.Z)(function*(){i.sharedvar.pollActivity.productList?.splice(e,1),yield i.dtb.updatePollGroupAsync(i.sharedvar.pollActivity)})()}getStrData(e,i){return i.split(":")[e]||""}onSelCost(){var e=this;return(0,d.Z)(function*(){const i=[],n=yield e.dtb.getAllCRMCostAsync();n&&(n.forEach(s=>{s&&i.push({selected:!1,myid:s.id,name:s.name,hide1:s._id,hide2:s.linkup_1,hide3:s.phone_1})}),e.ds.aSelectDefault({title:"Seleccione Clientes",dgwidth:300,dgheigth:450,viewfilter:!0,viewAdd:!1,valuelst:i}).subscribe(function(){var s=(0,d.Z)(function*(r){r&&(r.forEach(a=>{e.sharedvar.pollActivity.costumerList?.includes(a.myid)||e.sharedvar.pollActivity.costumerList?.push(`${a.myid}:${a.name}:${a.hide1}:${a.hide2}:${a.hide3}`)}),yield e.dtb.updatePollGroupAsync(e.sharedvar.pollActivity))});return function(r){return s.apply(this,arguments)}}()))})()}onDeleteCost(e){var i=this;return(0,d.Z)(function*(){i.sharedvar.pollActivity.costumerList?.splice(e,1),yield i.dtb.updatePollGroupAsync(i.sharedvar.pollActivity)})()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(C.D),t.Y36(y.n),t.Y36(_.k))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-poll-crm"]],viewQuery:function(i,n){if(1&i&&t.Gf(Z,5),2&i){let l;t.iGM(l=t.CRH())&&(n.editControlTrigger=l.first)}},decls:18,vars:6,consts:[[3,"buttons","nav_menu","onClicked"],["id","spanTrigger",3,"matMenuTriggerFor"],["editControlTrigger","matMenuTrigger"],[1,"h-12","bg-slate-100","text-xl","text-center"],[4,"ngIf"],["controlEdit","matMenu"],["mat-menu-item","",3,"click"],[1,"flex-col","flex-wrap","p-2","gap-1"],["class","h-10 flex gap-1 border-b border-gray-100 font-thin",4,"ngFor","ngForOf"],[1,"h-10","flex","gap-1","border-b","border-gray-100","font-thin"],[1,"w-60","font-medium"],[1,"font-thin"],[1,"w-20","font-thin","text-gray-400"],[1,"w-2"],[1,"w-28","font-thin","text-gray-400"],[1,"text-gray-300","hover:text-violet-500",3,"click"],[1,"w-16"],[1,"w-72"]],template:function(i,n){if(1&i&&(t.TgZ(0,"app-header",0),t.NdJ("onClicked",function(s){return n.getClicked(s)}),t.qZA(),t._UZ(1,"span",1,2),t.TgZ(3,"div",3),t._uU(4),t.qZA(),t.TgZ(5,"div"),t.YNc(6,T,3,1,"div",4),t.YNc(7,b,3,1,"div",4),t.TgZ(8,"mat-menu",null,5)(10,"button",6),t.NdJ("click",function(){return n.selCostumer()}),t.TgZ(11,"mat-icon"),t._uU(12,"people"),t.qZA(),t._uU(13," Seleccionar Clientes "),t.qZA(),t.TgZ(14,"button",6),t.NdJ("click",function(){return n.selProd()}),t.TgZ(15,"mat-icon"),t._uU(16,"shopping_cart"),t.qZA(),t._uU(17," Seleccionar Productos "),t.qZA()()()),2&i){const l=t.MAs(9);t.Q6J("buttons","10110")("nav_menu",!0),t.xp6(1),t.Q6J("matMenuTriggerFor",l),t.xp6(3),t.Oqu(n.tabSelectedName),t.xp6(2),t.Q6J("ngIf",0===n.tabSelected),t.xp6(1),t.Q6J("ngIf",1===n.tabSelected)}},dependencies:[m.sg,m.O5,A.G,p.VK,p.OP,p.p6,f.Hw]})}return o})()}];let U=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(S),g.Bz]})}return o})();var w=c(769);let M=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[m.ez,U,w.O,p.Tx,f.Ps]})}return o})()}}]);