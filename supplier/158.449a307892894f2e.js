"use strict";(self.webpackChunktasky_supplier=self.webpackChunktasky_supplier||[]).push([[158],{1158:(j,p,a)=>{a.r(p),a.d(p,{StaffListModule:()=>B});var f=a(7087),l=a(3759),g=a(1348),C=a.t(g,2),t=a(2283),k=a(4758),_=a(6655),T=a(8878),S=a(1359),d=a(9347),u=a(8464),Z=a(3578);const v=function(i){return{"background-color":i}};let m=(()=>{class i{constructor(){this.onClicked=new t.vpe}ngOnInit(){}getBackColor(){return this.staff.active?"white":"#ffffcc"}getPicture(){return this.staff.picture&&this.staff.picture.length>0?this.staff.picture:"https://hips.hearstapps.com/hmg-prod/images/how-to-shave-your-face-at-home-1648149510.png?crop=0.505xw:1.00xh;0.228xw,0.00408xh&resize=1200:*"}onClick(e){this.staff.tag=e,this.onClicked.emit(this.staff)}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-staff"]],inputs:{staff:"staff"},outputs:{onClicked:"onClicked"},decls:35,vars:9,consts:[[1,"h-32","w-64","flex","flex-col","rounded","border","border-gray-200","p-1","shadow-sm",3,"ngStyle"],[1,"flex","flex-row"],["alt","aja",1,"h-12","w-12","rounded-full","object-fill",3,"src"],[1,"flex","flex-col","items-start","px-2"],[1,"h-6","w-48","overflow-hidden","font-medium","leading-tight"],[1,"pl-2","h-5","w-48","font-light","text-xs","overflow-hidden"],[1,"w-48","h-6","px-1","border-t","border-violet-300","flex","flex-row","gap-x-4","justify-end","text-violet-300"],[1,"pt-1"],[1,"hover:text-gray-900",3,"click"],[1,"hover:text-gray-900"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div",3)(4,"div",4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"strong"),t._uU(8,"M\xf3vil:"),t.qZA(),t._uU(9),t.qZA(),t.TgZ(10,"div",5)(11,"strong"),t._uU(12,"email:"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"div",5)(15,"strong"),t._uU(16,"Calificaci\xf3n:"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"div",6)(19,"div",7)(20,"span")(21,"mat-icon",8),t.NdJ("click",function(){return n.onClick("1")}),t._uU(22,"perm_identity"),t.qZA(),t.TgZ(23,"mat-icon",9),t._uU(24,"task_alt"),t.qZA(),t.TgZ(25,"mat-icon",9),t._uU(26,"forum"),t.qZA()(),t._uU(27," \xa0 "),t.TgZ(28,"span")(29,"mat-icon",8),t.NdJ("click",function(){return n.onClick("2")}),t._uU(30,"delete"),t.qZA(),t.TgZ(31,"mat-icon",8),t.NdJ("click",function(){return n.onClick("0")}),t._uU(32,"lock_open"),t.qZA(),t.TgZ(33,"mat-icon",8),t.NdJ("click",function(){return n.onClick("1")}),t._uU(34,"edit"),t.qZA()()()()()()()),2&s&&(t.Q6J("ngStyle",t.VKq(7,v,n.getBackColor())),t.xp6(2),t.Q6J("src",n.getPicture(),t.LSH),t.xp6(3),t.AsE("",n.staff.names," ",n.staff.second_names,""),t.xp6(4),t.hij(" ",n.staff.phone,""),t.xp6(4),t.hij(" ",n.staff.email,""),t.xp6(4),t.hij(" ",n.staff.stars,""))},dependencies:[f.PC,u.Hw]})}return i})();const x=["editControlTrigger"];function y(i,F){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-staff",7),t.NdJ("onClicked",function(){const o=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.getStaffClicked(o))}),t.qZA()()}if(2&i){const e=F.$implicit;t.xp6(1),t.Q6J("staff",e)}}const A=[{path:"",component:(()=>{class i{constructor(e,s,n,o){this.sharedvar=e,this.dtb=s,this.dg=n,this.snkBar=o,this.deldup=0,this.staffList=[]}ngOnInit(){this.sub=this.dtb.getStaffByFilter(0,!1,0).subscribe(e=>{this.staffList=e})}getClicked(e){switch(e.index){case 2:this.onStaff();break;case 3:let s=document.getElementById("spanTrigger");s&&(s.style.display="",s.style.position="absolute",s.style.left=e.pageX+5+"px",s.style.top=e.pageY+5+"px",this.editControlTrigger.openMenu())}}getStaffClicked(e){switch(e.tag){case"0":this.snkBar.open(`Rieniciar contrase\xf1a: ${e.names} ${e.second_names}?.`,"Ok",{duration:5e3}).onAction().subscribe(s=>{e.password="",this.dtb.updateStaffAsync(e)});break;case"1":this.onStaff(e);break;case"2":this.snkBar.open(`Eliminar tasker: ${e.names} ${e.second_names}?.`,"Ok",{duration:5e3}).onAction().subscribe(s=>{e.active=!1,this.dtb.updateStaffAsync(e)})}}onStaff(e=null){let s=!1;e||(e={},s=!0);let n={schema:C,value:e,title:"Datos del Tasker",showImage:!0,image:e.picture,imgwidth:300,imgheight:300,newUsr:s};this.dg.aDefault(n).subscribe(o=>{o&&e&&(this.dg.updatePropResult(e,o),e.rol||(e.rol=[]),e.rol.includes("A")||e.rol.push("A"),n.image&&(e.picture=n.image),this.dtb.setStaff(e).subscribe({next:r=>{e=r;const h=this.staffList.findIndex(M=>M._id===r._id);h>=0?this.staffList[h]=r:this.staffList.push(r)}}),navigator.clipboard.writeText(`${this.sharedvar.TASKY_SERVER}tasker/?staff=${e._id}`).then(r=>{}).catch(r=>alert(r)),this.snkBar.open("V\xednculo al cliente copiado al portapapeles.","Ok",{duration:3e3}))})}onImportExcel(){}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(k.D),t.Y36(_.k),t.Y36(T.x),t.Y36(S.ux))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-staff-list"]],viewQuery:function(s,n){if(1&s&&t.Gf(x,5),2&s){let o;t.iGM(o=t.CRH())&&(n.editControlTrigger=o.first)}},decls:12,vars:4,consts:[[3,"buttons","nav_menu","onClicked"],["id","spanTrigger",3,"matMenuTriggerFor"],["editControlTrigger","matMenuTrigger"],[1,"flex","flex-wrap","p-2","gap-1"],[4,"ngFor","ngForOf"],["controlEdit","matMenu"],["mat-menu-item","",3,"click"],[3,"staff","onClicked"]],template:function(s,n){if(1&s&&(t.TgZ(0,"app-header",0),t.NdJ("onClicked",function(c){return n.getClicked(c)}),t.qZA(),t._UZ(1,"span",1,2),t.TgZ(3,"div",3),t.YNc(4,y,2,1,"div",4),t.qZA(),t.TgZ(5,"mat-menu",null,5)(7,"button",6),t.NdJ("click",function(){return n.onImportExcel()}),t.TgZ(8,"mat-icon"),t._uU(9,"build"),t.qZA(),t._uU(10," Importar de Excel "),t.qZA(),t._UZ(11,"hr"),t.qZA()),2&s){const o=t.MAs(6);t.Q6J("buttons","11110")("nav_menu",!1),t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(3),t.Q6J("ngForOf",n.staffList)}},dependencies:[f.sg,d.VK,d.OP,d.p6,u.Hw,Z.G,m]})}return i})()}];let b=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(A),l.Bz]})}return i})();var w=a(769);const U=[{path:"",component:m}];let L=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(U),l.Bz]})}return i})(),J=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[f.ez,L,u.Ps]})}return i})(),B=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[f.ez,b,d.Tx,u.Ps,w.O,J]})}return i})()}}]);